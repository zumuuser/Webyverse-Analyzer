<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Webyverse - Email Verification History</title>

  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;800&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <style>
    /* Root colors and fonts - EXACT copy from email_verify.html */
    :root {
      --container-light: #ffffff;
      --container-dark: #1e1e1e;
      --text-light: #212529;
      --text-dark: #e4e6eb;
      --accent: #007bff;
      --accent-secondary: #6f42c1;
      --success: #28a745;
      --warning: #ffc107;
      --danger: #dc3545;
      --info: #17a2b8;
      --card-light: #f8f9fa;
      --card-dark: #252525;
      --bg-dark: #1a1a1a;
      --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --gradient-success: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      --gradient-danger: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
      --gradient-info: linear-gradient(135deg, #17a2b8 0%, #6f42c1 100%);
    }

    /* Enhanced animated background - EXACT copy from email_verify.html */
    body {
      background: linear-gradient(-45deg,
        #ffffff,
        #dfe9f3,
        #c0d3f2,
        #ffffff
      );
      background-size: 300% 300%;
      animation: bgMove 10s ease-in-out infinite;
      font-family: 'Sora', sans-serif;
      font-size: 18px;
      line-height: 1.7;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    
    .dark-theme {
      background: linear-gradient(-45deg,
        #1a1a1a, #202533, #2b2f3a, #1f1f1f);
      background-size: 300% 300%;
      animation: bgMove 10s ease-in-out infinite;
      color: var(--text-dark);
    }
    
    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Enhanced starfield effect for dark theme - EXACT copy */
    .dark-theme::before {
      content: '';
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background-image: radial-gradient(white 0.6px, transparent 0.6px);
      background-size: 150px 150px;
      background-position: 0 0;
      opacity: 0.08;
      animation: twinkle 3s infinite ease-in-out alternate;
      pointer-events: none;
      z-index: 0;
      mask-image: linear-gradient(to bottom, transparent 0%, black 20%, black 80%, transparent 100%);
    }

    @keyframes twinkle {
      0% { opacity: 0.03; transform: translateY(0); }
      50% { opacity: 0.12; transform: translateY(-1px); }
      100% { opacity: 0.06; transform: translateY(0); }
    }

    #starfield {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
      pointer-events: none;
      display: none;
    }
    .dark-theme #starfield {
      display: block;
    }

    /* Main container - EXACT copy from email_verify.html */
    #app {
      max-width: 850px;
      margin: 30px auto;
      background: var(--container-light);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 15px 50px rgba(0,0,0,0.1);
      transition: all 0.4s ease;
      position: relative;
      z-index: 2;
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,0.2);
    }
    .dark-theme #app {
      background: var(--container-dark);
      box-shadow: 0 20px 60px rgba(0,0,0,0.4);
      border: 1px solid rgba(255,255,255,0.1);
    }

    /* Enhanced navigation - EXACT copy */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 40px;
      border-bottom: 2px solid rgba(0,123,255,0.1);
      padding-bottom: 20px;
    }
    .dark-theme .navbar {
      border-color: rgba(0,123,255,0.2);
    }
    
    .nav-links {
      display: flex;
      gap: 25px;
    }
    .nav-links a {
      text-decoration: none;
      color: var(--text-light);
      font-weight: 700;
      font-size: 0.9rem;
      padding: 10px 16px;
      border-radius: 10px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 6px;
      position: relative;
      overflow: hidden;
    }
    .dark-theme .nav-links a {
      color: var(--text-dark);
    }
    .nav-links a::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: var(--gradient-primary);
      transition: left 0.3s ease;
      z-index: -1;
    }
    .nav-links a:hover::before {
      left: 0;
    }
    .nav-links a:hover {
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0,123,255,0.3);
    }
    
    .logo {
      font-size: 1.9rem;
      font-weight: 900;
      background: var(--gradient-primary);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
    }

    /* Floating theme toggle - EXACT copy */
    .floating-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--gradient-primary);
      color: white;
      padding: 16px 20px;
      font-size: 1.4rem;
      border-radius: 50px;
      border: none;
      cursor: pointer;
      box-shadow: 0 8px 32px rgba(0,123,255,0.3);
      z-index: 9999;
      transition: all 0.3s ease;
    }
    .floating-toggle:hover {
      transform: scale(1.1) rotate(10deg);
      box-shadow: 0 12px 40px rgba(0,123,255,0.4);
    }

    /* Enhanced hero section - EXACT copy but adapted content */
    .hero {
      text-align: center;
      margin-bottom: 45px;
      position: relative;
      padding: 45px 0;
    }
    .hero h1 {
      font-size: 3.2rem;
      font-weight: 900;
      margin-bottom: 20px;
      background: var(--gradient-primary);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      line-height: 1.1;
      position: relative;
    }
    .hero p {
      font-size: 1.2rem;
      max-width: 680px;
      margin: 0 auto 30px;
      color: var(--text-light);
      opacity: 0.8;
      line-height: 1.6;
    }
    .dark-theme .hero p {
      color: var(--text-dark);
    }

    /* Email history specific styles using email_verify.html design */
    .email-history-container {
      background: var(--card-light);
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 15px 50px rgba(0,0,0,0.08);
      border: 2px solid rgba(0,123,255,0.1);
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
      margin-bottom: 30px;
    }
    .dark-theme .email-history-container {
      background: var(--card-dark);
      border-color: rgba(0,123,255,0.2);
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    .email-history-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-primary);
    }

    .section-title {
      font-weight: 900;
      font-size: 1.9rem;
      background: var(--gradient-primary);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 25px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    /* Filter buttons using email_verify design */
    .filters {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
      flex-wrap: wrap;
      align-items: center;
    }
    .filter-btn {
      background: var(--gradient-primary);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
      position: relative;
      overflow: hidden;
    }
    .filter-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255,255,255,0.3);
      border-radius: 50%;
      transition: all 0.6s ease;
      transform: translate(-50%, -50%);
    }
    .filter-btn:hover::before {
      width: 300px;
      height: 300px;
    }
    .filter-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0,123,255,0.3);
    }
    .filter-btn.active {
      background: var(--gradient-success);
      box-shadow: 0 8px 25px rgba(40,167,69,0.3);
    }

    .clear-history-btn {
      background: var(--gradient-danger);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .clear-history-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(220,53,69,0.3);
    }

    /* Chart container using email_verify styling */
    .history-chart {
      background: var(--card-light);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 15px 50px rgba(0,0,0,0.08);
      border: 2px solid rgba(0,123,255,0.1);
      margin-bottom: 40px;
      position: relative;
      overflow: hidden;
    }
    .dark-theme .history-chart {
      background: var(--card-dark);
      border-color: rgba(0,123,255,0.2);
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    .history-chart::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-info);
    }
    .history-chart h3 {
      font-size: 1.8rem;
      font-weight: 800;
      background: var(--
            gradient-info);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 25px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .chart-container {
      position: relative;
      height: 300px;
      width: 100%;
    }

    /* Email history cards using email_verify design */
    .email-history {
      background: var(--card-light);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 15px 50px rgba(0,0,0,0.08);
      border: 2px solid rgba(0,123,255,0.1);
      margin-bottom: 30px;
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
    }
    .dark-theme .email-history {
      background: var(--card-dark);
      border-color: rgba(0,123,255,0.2);
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    .email-history::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-primary);
    }
    .email-history:hover {
      transform: translateY(-8px);
      box-shadow: 0 30px 80px rgba(0,0,0,0.15);
      border-color: rgba(0,123,255,0.3);
    }

    .email-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid rgba(0,123,255,0.1);
      gap: 15px;
    }
    .dark-theme .email-header {
      border-color: rgba(0,123,255,0.2);
    }

    .email-info {
      flex: 1;
    }

    .email-address {
      font-size: 1.3rem;
      font-weight: 800;
      background: var(--gradient-primary);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
      word-break: break-all;
    }

    .email-date {
      color: #6c757d;
      font-size: 1rem;
      font-weight: 500;
    }
    .dark-theme .email-date {
      color: #aaa;
    }

    .email-actions {
      flex-shrink: 0;
      display: flex;
      gap: 10px;
      align-items: flex-start;
    }

    /* Status badge using email_verify design */
    .status-badge {
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: 700;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .status-deliverable {
      background: var(--gradient-success);
      color: white;
      box-shadow: 0 4px 15px rgba(40,167,69,0.3);
    }
    .status-undeliverable {
      background: var(--gradient-danger);
      color: white;
      box-shadow: 0 4px 15px rgba(220,53,69,0.3);
    }

    /* Metrics grid using email_verify styling */
    .metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .metric {
      background: rgba(255,255,255,0.5);
      padding: 20px;
      border-radius: 16px;
      border: 2px solid rgba(0,123,255,0.1);
      text-align: center;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .dark-theme .metric {
      background: rgba(0,0,0,0.2);
      border-color: rgba(0,123,255,0.2);
    }
    .metric:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      border-color: rgba(0,123,255,0.3);
    }

    .metric-title {
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--text-light);
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .dark-theme .metric-title {
      color: var(--text-dark);
    }

    .metric-value {
      font-size: 2rem;
      font-weight: 900;
      background: var(--gradient-primary);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* Action buttons using email_verify design */
    .action-btn {
      background: var(--gradient-primary);
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.85rem;
    }
    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0,123,255,0.3);
    }

    .view-json-btn {
      background: var(--gradient-info);
    }
    .view-json-btn:hover {
      box-shadow: 0 8px 25px rgba(23,162,184,0.3);
    }

    .delete-btn {
      background: var(--gradient-danger);
    }
    .delete-btn:hover {
      box-shadow: 0 8px 25px rgba(220,53,69,0.3);
    }

    /* Empty state */
    .empty-history {
      text-align: center;
      padding: 60px 20px;
      color: #6c757d;
    }
    .dark-theme .empty-history {
      color: #aaa;
    }
    .empty-history .material-icons {
      font-size: 4rem;
      margin-bottom: 20px;
      opacity: 0.5;
    }

    /* Results explanation section */
    .results-explanation {
      background: var(--card-light);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 15px 50px rgba(0,0,0,0.08);
      border: 2px solid rgba(0,123,255,0.1);
      margin-bottom: 40px;
      position: relative;
      overflow: hidden;
    }
    .dark-theme .results-explanation {
      background: var(--card-dark);
      border-color: rgba(0,123,255,0.2);
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    .results-explanation::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-info);
    }

    .explanation-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin-top: 30px;
    }

    .explanation-card {
      background: rgba(255,255,255,0.5);
      padding: 25px;
      border-radius: 16px;
      border: 2px solid rgba(0,123,255,0.1);
      transition: all 0.3s ease;
    }
    .dark-theme .explanation-card {
      background: rgba(0,0,0,0.2);
      border-color: rgba(0,123,255,0.2);
    }
    .explanation-card:hover {
      transform: translateY(-5px);
      border-color: rgba(0,123,255,0.3);
    }

    .explanation-title {
      font-weight: 700;
      font-size: 1.1rem;
      background: var(--gradient-primary);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .explanation-text {
      color: var(--text-light);
      line-height: 1.6;
      font-size: 0.95rem;
    }
    .dark-theme .explanation-text {
      color: var(--text-dark);
    }

    /* Responsive design - EXACT copy from email_verify.html */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2.2rem;
      }
      
      .nav-links {
        gap: 12px;
      }
      
      .nav-links a {
        padding: 6px 10px;
        font-size: 0.85rem;
      }
      
      #app {
        margin: 15px auto;
        padding: 25px 15px;
      }
      
      .email-history-container,
      .email-history,
      .history-chart,
      .results-explanation {
        padding: 25px 15px;
      }

      .filters {
        flex-direction: column;
        align-items: stretch;
      }

      .clear-history-btn {
        margin-left: 0;
        margin-top: 10px;
      }

      .email-header {
        flex-direction: column;
        gap: 15px;
      }

      .email-actions {
        align-self: stretch;
        justify-content: space-between;
      }

      .metrics {
        grid-template-columns: 1fr;
      }
    }
    /* Modern Footer Styles */
.footer {
  background: var(--card-light);
  margin-top: 80px;
  padding: 60px 0 40px;
  border-radius: 20px 20px 0 0;
  border: 2px solid rgba(0,123,255,0.1);
  position: relative;
  overflow: hidden;
}
.dark-theme .footer {
  background: var(--card-dark);
  border-color: rgba(0,123,255,0.2);
}
.footer::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--gradient-primary);
}

.footer-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 30px;
}

.footer-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 40px;
  margin-bottom: 40px;
}

.footer-section h3 {
  font-size: 1.3rem;
  font-weight: 800;
  background: var(--gradient-primary);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.footer-links {
  list-style: none;
  padding: 0;
  margin: 0;
}

.footer-links li {
  margin-bottom: 12px;
}

.footer-links a {
  color: var(--text-light);
  text-decoration: none;
  font-weight: 500;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 0;
}
.dark-theme .footer-links a {
  color: var(--text-dark);
}

.footer-links a:hover {
  color: var(--accent);
  transform: translateX(5px);
}

.footer-bottom {
  text-align: center;
  padding-top: 30px;
  border-top: 2px solid rgba(0,123,255,0.1);
  color: var(--text-light);
  font-weight: 500;
}
.dark-theme .footer-bottom {
  border-color: rgba(0,123,255,0.2);
  color: var(--text-dark);
}

.footer-logo {
  font-size: 1.8rem;
  font-weight: 900;
  background: var(--gradient-primary);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.footer-description {
  color: var(--text-light);
  opacity: 0.8;
  line-height: 1.6;
  margin-bottom: 20px;
}
.dark-theme .footer-description {
  color: var(--text-dark);
}

@media (max-width: 768px) {
  .footer-grid {
    grid-template-columns: 1fr;
    gap: 30px;
  }
  
  .footer-container {
    padding: 0 20px;
  }
  
  .footer {
    padding: 40px 0 30px;
  }
}

  </style>
</head>
<body>

  <canvas id="starfield"></canvas>
  <button class="floating-toggle" id="themeToggle" aria-label="Toggle dark/light theme">
    <span class="material-icons">dark_mode</span>
  </button>

  <div id="app" role="main">
    <!-- Navigation matching email_verify.html -->
    <nav class="navbar" role="navigation" aria-label="Primary navigation">
      <a href="/email-verify" class="logo" aria-label="Go to email verification">
        <span class="material-icons" aria-hidden="true">history</span> 
        Email History
      </a>
      <div class="nav-links">
        <a href="/email-verify" aria-label="Email verification">
          <span class="material-icons" aria-hidden="true">verified_user</span> Verify Email
        </a>
        <a href="/email-docs" aria-label="Email Documentation">
          <span class="material-icons" aria-hidden="true">menu_book</span> Email Docs
        </a>
        <a href="http://webyverse.net" target="_blank" rel="noopener" aria-label="Main domain analyzer">
          <span class="material-icons" aria-hidden="true">domain</span> Domain Analyzer
        </a>
        <a href="/phone-lookup" aria-label="Phone lookup tool">
          <span class="material-icons" aria-hidden="true">phone</span> Phone Lookup
        </a>
      </div>
    </nav>

    <!-- Enhanced hero section -->
    <header class="hero" role="banner">
      <h1 id="heroTitle">Email Verification History</h1>
      <p>Track your email verification results over time. Monitor deliverability trends, review validation metrics, and gain insights into email quality patterns.</p>
    </header>

    <!-- Results Explanation Section -->
    <section class="results-explanation">
      <h2 class="section-title">
        <span class="material-icons" aria-hidden="true">help_outline</span> 
        Understanding Your Results
      </h2>
      <p style="margin-bottom: 25px; color: var(--text-light); font-size: 1.1rem; line-height: 1.6;">
        Each email verification provides comprehensive analysis across multiple validation criteria. Here's what each metric means:
      </p>
      <div class="dark-theme-text" style="color: var(--text-dark);">
        <div class="explanation-grid">
          <div class="explanation-card">
            <div class="explanation-title">
              <span class="material-icons">check_circle</span>
              Deliverability Status
            </div>
            <div class="explanation-text">
              <strong>Deliverable:</strong> Email passes all critical checks and can receive messages.<br>
              <strong>Undeliverable:</strong> Email fails key validation tests and likely cannot receive messages.
            </div>
          </div>

          <div class="explanation-card">
            <div class="explanation-title">
              <span class="material-icons">score</span>
              Reputation Score (0-100)
            </div>
            <div class="explanation-text">
              <strong>80-100:</strong> High quality, low risk email<br>
              <strong>60-79:</strong> Good quality with minor issues<br>
              <strong>40-59:</strong> Moderate risk, some concerns<br>
              <strong>0-39:</strong> High risk, multiple validation failures
            </div>
          </div>

          <div class="explanation-card">
            <div class="explanation-title">
              <span class="material-icons">format_list_bulleted</span>
              Format Validation
            </div>
            <div class="explanation-text">
              Checks if the email address follows proper RFC standards for email formatting. This includes verifying the structure (local@domain), character validity, and syntax compliance.
            </div>
          </div>

          <div class="explanation-card">
            <div class="explanation-title">
              <span class="material-icons">dns</span>
              MX Records Check
            </div>
            <div class="explanation-text">
              Verifies that the domain has Mail Exchange (MX) records configured, which are required for the domain to receive emails. Missing MX records indicate the domain cannot accept mail.
            </div>
          </div>

          <div class="explanation-card">
            <div class="explanation-title">
              <span class="material-icons">mail_outline</span>
              SMTP Verification
            </div>
            <div class="explanation-text">
              Tests actual connectivity to the domain's mail server. This simulates sending an email to verify the server responds and can potentially deliver messages to the address.
            </div>
          </div>

          <div class="explanation-card">
            <div class="explanation-title">
              <span class="material-icons">domain</span>
              Domain Status
            </div>
            <div class="explanation-text">
              Analyzes the overall health and reachability of the email's domain. Checks DNS resolution, domain reputation, and whether the domain appears to be actively maintained.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Email History Container -->
    <section class="email-history-container">
      <h2 class="section-title">
        <span class="material-icons" aria-hidden="true">analytics</span> 
        Your Email Verification History
      </h2>
      
      <div class="filters">
        <button class="filter-btn active" data-filter="all">All Emails</button>
        <button class="filter-btn" data-filter="7days">Last 7 Days</button>
        <button class="filter-btn" data-filter="30days">Last 30 Days</button>
        <button class="filter-btn" data-filter="90days">Last 90 Days</button>
        <button class="clear-history-btn" onclick="clearEmailHistory()">
          <span class="material-icons">delete_forever</span>
          Clear All History
        </button>
      </div>

      <!-- Performance Trends Chart -->
      <div class="history-chart">
        <h3>
          <span class="material-icons">trending_up</span>
          Email Quality Trends
        </h3>
        <div class="chart-container">
          <canvas id="emailChart"></canvas>
        </div>
      </div>

      <!-- Email History List -->
      <div id="emailHistoryList">
        <div class="empty-history" id="emptyState">
          <span class="material-icons">email_search</span>
          <h3>No Email Verifications Yet</h3>
          <p>Start verifying emails to see your history and trends here.</p>
          <a href="/email-verify" style="
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 20px;
            background: var(--gradient-primary);
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
          " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(0,123,255,0.3)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
            <span class="material-icons">verified_user</span>
            Verify Your First Email
          </a>
        </div>
      </div>
    </section>
  </div>
<footer class="footer">
  <div class="footer-container">
    <div class="footer-grid">
      <!-- Brand Section -->
      <div class="footer-section">
        <div class="footer-logo">
          <span class="material-icons">analytics</span>
          Webyverse
        </div>
        <p class="footer-description">
          Comprehensive web analysis tools for domains, emails, and phone numbers. 
          Get detailed insights and security analysis for better online presence.
        </p>
      </div>

      <!-- Tools Section -->
      <div class="footer-section">
        <h3>
          <span class="material-icons">build</span>
          Analysis Tools
        </h3>
        <ul class="footer-links">
          <li><a href="/"><span class="material-icons">domain</span>Domain Analyzer</a></li>
          <li><a href="/email-verify"><span class="material-icons">verified_user</span>Email Verification</a></li>
          <li><a href="/phone-lookup"><span class="material-icons">phone</span>Phone Lookup</a></li>
        </ul>
      </div>

      <!-- History & Reports -->
      <div class="footer-section">
        <h3>
          <span class="material-icons">history</span>
          History & Reports
        </h3>
        <ul class="footer-links">
          <li><a href="/history"><span class="material-icons">timeline</span>Domain History</a></li>
          <li><a href="/emailhistory"><span class="material-icons">email</span>Email History</a></li>
          <li><a href="/phonehistory"><span class="material-icons">phone_callback</span>Phone History</a></li>
        </ul>
      </div>

      <!-- Documentation -->
      <div class="footer-section">
        <h3>
          <span class="material-icons">menu_book</span>
          Documentation
        </h3>
        <ul class="footer-links">
          <li><a href="/documentation"><span class="material-icons">description</span>Domain Docs</a></li>
          <li><a href="/emaildocs"><span class="material-icons">mail_outline</span>Email Docs</a></li>
          <li><a href="/phonedocs"><span class="material-icons">phone_in_talk</span>Phone Docs</a></li>
        </ul>
      </div>

      <!-- Company Info -->
      <div class="footer-section">
        <h3>
          <span class="material-icons">business</span>
          Company
        </h3>
        <ul class="footer-links">
          <li><a href="/about"><span class="material-icons">info</span>About Us</a></li>
          <li><a href="/contact"><span class="material-icons">contact_mail</span>Contact</a></li>
        </ul>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 Webyverse. All rights reserved. | Advanced Web Analysis Platform</p>
    </div>
  </div>
</footer>
<script>
  // Enhanced theme toggle - EXACT copy from email_verify.html
  const body = document.body;
  const toggle = document.getElementById('themeToggle');

  function updateThemeToggle() {
    const isDark = body.classList.contains('dark-theme');
    const icon = toggle.querySelector('.material-icons');
    icon.textContent = isDark ? 'light_mode' : 'dark_mode';
    localStorage.setItem('darkMode', isDark);
  }

  toggle.addEventListener('click', () => {
    body.classList.toggle('dark-theme');
    updateThemeToggle();
    
    toggle.style.transform = 'scale(0.8) rotate(180deg)';
    setTimeout(() => {
      toggle.style.transform = 'scale(1) rotate(0deg)';
    }, 200);
  });

  // Initialize theme from localStorage
  if (localStorage.getItem('darkMode') === 'true') {
    body.classList.add('dark-theme');
  }
  updateThemeToggle();

  // Email verification data and chart management
  const emailScores = [];
  let chartInstance;

  // Load email history from API
  function loadEmailHistory() {
    fetch('/api/emails')
      .then(res => res.json())
      .then(emails => {
        const historyList = document.getElementById('emailHistoryList');
        const emptyState = document.getElementById('emptyState');
        
        if (!emails || emails.length === 0) {
          emptyState.style.display = 'block';
          return;
        }
        
        emptyState.style.display = 'none';
        
        // Clear existing content except empty state
        const existingItems = historyList.querySelectorAll('.email-history');
        existingItems.forEach(item => item.remove());
        
        emails.forEach(emailItem => {
          loadEmailDetails(emailItem.email, emailItem.timestamp);
        });
      })
      .catch(err => {
        console.error('Error loading email history:', err);
        showNotification('Error loading email history', 'error');
      });
  }

  // Load individual email details
  function loadEmailDetails(email, timestamp) {
    fetch(`/api/email/${encodeURIComponent(email)}`)
      .then(res => res.json())
      .then(data => {
        if (!data || data.error) return;
        
        displayEmailHistory(data);
        
        // Add to chart data
        if (data.reputation_score !== undefined) {
          emailScores.push({
            email: data.email,
            score: data.reputation_score,
            deliverable: data.deliverability_status === 'Deliverable',
            timestamp: new Date(data.timestamp)
          });
          updateEmailChart();
        }
      })
      .catch(err => console.error('Error loading email details:', err));
  }

  // Display email history item
  function displayEmailHistory(data) {
    const historyList = document.getElementById('emailHistoryList');
    const isDeliverable = data.deliverability_status === 'Deliverable';
    
    const emailDiv = document.createElement('div');
    emailDiv.className = 'email-history';
    emailDiv.setAttribute('data-timestamp', data.timestamp);
    
    emailDiv.innerHTML = `
      <div class="email-header">
        <div class="email-info">
          <div class="email-address">${data.email}</div>
          <div class="email-date">${new Date(data.timestamp).toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
          })}</div>
        </div>
        <div class="email-actions">
          <div class="status-badge ${isDeliverable ? 'status-deliverable' : 'status-undeliverable'}">
            <span class="material-icons">${isDeliverable ? 'check_circle' : 'error'}</span>
            ${data.deliverability_status || 'Unknown'}
          </div>
        </div>
      </div>
      
      <div class="metrics">
        <div class="metric">
          <div class="metric-title">Reputation Score</div>
          <div class="metric-value">${data.reputation_score || 'N/A'}</div>
        </div>
        <div class="metric">
          <div class="metric-title">Format Valid</div>
          <div class="metric-value" style="color: ${data.format_valid ? 'var(--success)' : 'var(--danger)'};">
            ${data.format_valid ? 'YES' : 'NO'}
          </div>
        </div>
        <div class="metric">
          <div class="metric-title">MX Records</div>
          <div class="metric-value" style="color: ${data.mx_records?.has_mx ? 'var(--success)' : 'var(--danger)'};">
            ${data.mx_records?.has_mx ? 'FOUND' : 'NONE'}
          </div>
        </div>
        <div class="metric">
          <div class="metric-title">SMTP Status</div>
          <div class="metric-value" style="color: ${data.smtp_check?.valid ? 'var(--success)' : 'var(--danger)'};">
            ${data.smtp_check?.valid ? 'VALID' : 'INVALID'}
          </div>
        </div>
      </div>
      
      <div style="margin-top: 25px; display: flex; gap: 10px; flex-wrap: wrap;">
        <button class="action-btn view-json-btn" onclick="viewEmailReport('${data.email}')">
          <span class="material-icons">code</span>
          View JSON Report
        </button>
        <button class="action-btn delete-btn" onclick="deleteEmailHistory('${data.email}')">
          <span class="material-icons">delete</span>
          Delete Record
        </button>
      </div>
    `;
    
    historyList.appendChild(emailDiv);
  }

  // Update email quality trends chart
  function updateEmailChart() {
    const ctx = document.getElementById('emailChart').getContext('2d');
    const sortedScores = emailScores.sort((a, b) => a.timestamp - b.timestamp);
    
    const labels = sortedScores.map(item => {
      const email = item.email;
      return email.length > 20 ? email.substring(0, 17) + '...' : email;
    });
    
    const scores = sortedScores.map(item => item.score);
    const colors = sortedScores.map(item => 
      item.deliverable ? 'rgba(40,167,69,0.8)' : 'rgba(220,53,69,0.8)'
    );
    
    if (chartInstance) chartInstance.destroy();
    
    chartInstance = new Chart(ctx, {
      type: 'line',
      data: {
        labels: labels,
        datasets: [{
          label: 'Email Quality Score',
          data: scores,
          borderColor: '#667eea',
          backgroundColor: 'rgba(102,126,234,0.1)',
          pointBackgroundColor: colors,
          pointBorderColor: colors,
          pointRadius: 6,
          pointHoverRadius: 8,
          tension: 0.3,
          fill: true,
          borderWidth: 3
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        interaction: {
          intersect: false,
          mode: 'index'
        },
        plugins: {
          tooltip: {
            callbacks: {
              title: function(context) {
                return sortedScores[context[0].dataIndex].email;
              },
              label: function(context) {
                const item = sortedScores[context.dataIndex];
                return [
                  `Score: ${context.parsed.y}/100`,
                  `Status: ${item.deliverable ? 'Deliverable' : 'Undeliverable'}`,
                  `Date: ${item.timestamp.toLocaleDateString()}`
                ];
              }
            },
            backgroundColor: 'rgba(0,0,0,0.8)',
            titleColor: 'white',
            bodyColor: 'white',
            borderColor: '#667eea',
            borderWidth: 1
          },
          legend: {
            labels: {
              color: document.body.classList.contains('dark-theme') ? '#e4e6eb' : '#212529',
              font: { size: 14, weight: 600 }
            }
          }
        },
        scales: {
          x: {
            ticks: {
              color: document.body.classList.contains('dark-theme') ? '#e4e6eb' : '#212529',
              font: { size: 12 },
              maxRotation: 45,
              callback: function(value, index) {
                const label = this.getLabelForValue(value);
                return label.length > 15 ? label.substring(0, 12) + '...' : label;
              }
            },
            grid: {
              color: document.body.classList.contains('dark-theme') ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)'
            }
          },
          y: {
            min: 0,
            max: 100,
            ticks: {
              color: document.body.classList.contains('dark-theme') ? '#e4e6eb' : '#212529',
              font: { size: 12 }
            },
            grid: {
              color: document.body.classList.contains('dark-theme') ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)'
            }
          }
        }
      }
    });
  }

  // Filter functionality
  const filterButtons = document.querySelectorAll('.filter-btn');
  filterButtons.forEach(button => {
    button.addEventListener('click', () => {
      filterButtons.forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');
      
      const filter = button.getAttribute('data-filter');
      const emailItems = document.querySelectorAll('.email-history');
      
      emailItems.forEach(item => {
        const timestamp = new Date(item.getAttribute('data-timestamp'));
        const now = new Date();
        const daysDiff = (now - timestamp) / (1000 * 60 * 60 * 24);
        
        let show = true;
        
        switch(filter) {
          case '7days':
            show = daysDiff <= 7;
            break;
          case '30days':
            show = daysDiff <= 30;
            break;
          case '90days':
            show = daysDiff <= 90;
            break;
          case 'all':
          default:
            show = true;
            break;
        }
        
        item.style.display = show ? 'block' : 'none';
      });
    });
  });

  // View email JSON report
  function viewEmailReport(email) {
    fetch(`/api/email/${encodeURIComponent(email)}`)
      .then(res => res.json())
      .then(data => {
        if (!data || data.error) {
          showNotification('Report not found', 'error');
          return;
        }

        const jsonString = JSON.stringify(data, null, 2);
        const newTab = window.open();
        newTab.document.write(`
          <!DOCTYPE html>
          <html>
          <head>
            <title>Email Verification Report - ${data.email}</title>
            <style>
              body { 
                font-family: 'Courier New', monospace; 
                margin: 20px; 
                background: #f8f9fa; 
                color: #333;
              }
              pre { 
                background: white; 
                padding: 20px; 
                border-radius: 8px; 
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                overflow-x: auto;
                white-space: pre-wrap;
                word-wrap: break-word;
              }
              h1 { color: #007bff; }
            </style>
          </head>
          <body>
            <h1>Email Verification Report: ${data.email}</h1>
            <pre>${jsonString}</pre>
          </body>
          </html>
        `);
        newTab.document.close();
      })
      .catch(err => {
        console.error('Error loading report:', err);
        showNotification('Error loading report: ' + err.message, 'error');
      });
  }

  // Delete email history record
  function deleteEmailHistory(email) {
    if (confirm(`Are you sure you want to delete the verification record for "${email}"?`)) {
      // Remove from display
      const emailItems = document.querySelectorAll('.email-history');
      emailItems.forEach(item => {
        const emailAddress = item.querySelector('.email-address').textContent;
        if (emailAddress === email) {
          item.remove();
        }
      });
      
      // Remove from chart data
      const index = emailScores.findIndex(item => item.email === email);
      if (index > -1) {
        emailScores.splice(index, 1);
        updateEmailChart();
      }
      
      // Check if history is now empty
      const remainingItems = document.querySelectorAll('.email-history');
      if (remainingItems.length === 0) {
        document.getElementById('emptyState').style.display = 'block';
      }
      
      showNotification('Email record deleted successfully', 'success');
    }
  }

// In emailhistory.html, update the clearEmailHistory function:
function clearEmailHistory() {
  if (confirm('Are you sure you want to clear all email verification history? This action cannot be undone.')) {
    fetch('/api/clear-email-history', { method: 'DELETE' })  // Changed from /api/clear-history
      .then(res => res.json())
      .then(data => {
        if (data.success) {
          location.reload();
        } else {
          showNotification('Error clearing email history', 'error');
        }
      })
      .catch(err => {
        console.error('Error clearing email history:', err);
        showNotification('Error: ' + err.message, 'error');
      });
  }
}

  // Notification system
  function showNotification(message, type = 'info') {
    const bgColor = type === 'success' ? 'var(--success)' : 
                   type === 'error' ? 'var(--danger)' : 'var(--info)';
    const icon = type === 'success' ? 'check_circle' : 
                type === 'error' ? 'error' : 'info';
    
    const notification = document.createElement('div');
    notification.innerHTML = `
      <div style="
        position: fixed;
        top: 100px;
        right: 30px;
        z-index: 10000;
        background: ${bgColor};
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        font-size: 1rem;
        font-weight: 600;
        box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        display: flex;
        align-items: center;
        gap: 10px;
        animation: slideInRight 0.3s ease-out;
      ">
        <span class="material-icons">${icon}</span>
        ${message}
      </div>
      <style>
        @keyframes slideInRight {
          from { transform: translateX(100%); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
      </style>
    `;
    
    document.body.appendChild(notification);
    setTimeout(() => {
      notification.style.animation = 'slideInRight 0.3s ease-out reverse';
      setTimeout(() => notification.remove(), 300);
    }, 3000);
  }

  // Initialize page
  document.addEventListener('DOMContentLoaded', function() {
    loadEmailHistory();
    
    // Add smooth animations
    const style = document.createElement('style');
    style.textContent = `
      .email-history-container,
      .results-explanation,
      .history-chart { 
        animation: slideInUp 0.6s ease-out; 
      }
      .hero { 
        animation: slideInUp 0.4s ease-out; 
      }
      .navbar { 
        animation: slideInUp 0.2s ease-out; 
      }
      @keyframes slideInUp {
        from { 
          opacity: 0; 
          transform: translateY(30px); 
        }
        to { 
          opacity: 1; 
          transform: translateY(0); 
        }
      }
    `;
    document.head.appendChild(style);
  });

  // Update chart colors when theme changes
  const themeObserver = new MutationObserver(() => {
    if (chartInstance) {
      updateEmailChart();
    }
  });
  themeObserver.observe(document.body, {
    attributes: true,
    attributeFilter: ['class']
  });
</script>

<!-- Enhanced Starfield Animation - EXACT copy from email_verify.html -->
<script>
(function() {
  const canvas = document.getElementById("starfield");
  if (!canvas) return;
  
  const ctx = canvas.getContext("2d");
  let stars = [], w, h, animationId;
  let lastTime = 0;
  const targetFPS = 60;
  const frameTime = 1000 / targetFPS;

  function resize() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
    stars = [];
    
    for (let i = 0; i < 250; i++) {
      stars.push({
        x: Math.random() * w,
        y: Math.random() * h,
        r: Math.random() * 1.5 + 0.3,
        dx: 0.02 + Math.random() * 0.05,
        dy: (Math.random() - 0.5) * 0.03,
        opacity: Math.random() * 0.6 + 0.2,
        twinkle: Math.random() * 0.02 + 0.01,
        twinklePhase: Math.random() * Math.PI * 2
      });
    }
  }

  function draw(currentTime) {
    if (currentTime - lastTime < frameTime) {
      animationId = requestAnimationFrame(draw);
      return;
    }
    
    if (!ctx || !document.body.classList.contains('dark-theme')) {
      animationId = requestAnimationFrame(draw);
      return;
    }
    
    lastTime = currentTime;
    ctx.clearRect(0, 0, w, h);
    
    stars.forEach(s => {
      s.twinklePhase += s.twinkle;
      const twinkleOpacity = s.opacity + Math.sin(s.twinklePhase) * 0.3;
      
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255,255,255,${Math.max(0, Math.min(1, twinkleOpacity))})`;
      ctx.fill();

      s.x += s.dx;
      s.y += s.dy;

      if (s.x > w + s.r) s.x = -s.r;
      if (s.x < -s.r) s.x = w + s.r;
      if (s.y > h + s.r) s.y = -s.r;
      if (s.y < -s.r) s.y = h + s.r;
    });
    
    animationId = requestAnimationFrame(draw);
  }

  function startAnimation() {
    if (animationId) cancelAnimationFrame(animationId);
    animationId = requestAnimationFrame(draw);
  }

  function stopAnimation() {
    if (animationId) {
      cancelAnimationFrame(animationId);
      animationId = null;
    }
    if (ctx) ctx.clearRect(0, 0, w, h);
  }

  let resizeTimeout;
  window.addEventListener("resize", () => {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(resize, 250);
  });

  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
        if (document.body.classList.contains('dark-theme')) {
          startAnimation();
        } else {
          stopAnimation();
        }
      }
    });
  });

  observer.observe(document.body, {
    attributes: true,
    attributeFilter: ['class']
  });

  document.addEventListener('visibilitychange', function() {
    if (document.hidden) {
      stopAnimation();
    } else if (document.body.classList.contains('dark-theme')) {
      startAnimation();
    }
  });

  resize();
  if (document.body.classList.contains('dark-theme')) {
    startAnimation();
  }
})();
</script>

</body>
</html>